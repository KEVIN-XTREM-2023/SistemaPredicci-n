function [y1] = funcionPrediccion(x1)
%MYNEURALNETWORKFUNCTION neural network simulation function.
%
% Auto-generated by MATLAB, 16-Jul-2023 17:48:20.
%
% [y1] = myNeuralNetworkFunction(x1) takes these arguments:
%   x = Qx53 matrix, input #1
% and returns:
%   y = Qx4 matrix, output #1
% where Q is the number of samples.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [500;9;12;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0];
x1_step1.gain = [4.49438202247191e-05;0.181818181818182;0.0555555555555556;0.5;0.5;2;2;2;2;2;2;2;2;2;2;2;2;2;2;2;2;2;2;2;2;2;2;2;2;2;2;2;2;2;2;2;2;2;2;2;2;2;2;2;2;2;2;2;2;2;2;2;2];
x1_step1.ymin = -1;

% Layer 1
b1 = [-1.4297567528455363828;1.108491749897895895;-0.69261632844638643114;-0.46427461792628715864;-0.15104885687894070712;0.20991541348179956761;0.49983655267576143633;0.72849330109475451955;1.0521780029995742023;1.5023917867985607799];
IW1_1 = [1.1893604342583143918 0.24185714319911436054 0.22815714663017297448 0.079783019474353553124 -1.3639482710762231843 0.22549800102953529435 0.14661427096842666318 0.088651745018827707301 -0.0076984766590344408388 -0.029099573471747193498 -0.37330123389984870563 -0.13199614462444028695 -0.018807499387513852696 -0.13928320334801547187 -0.28126588294532045564 0.50432546754251827981 -0.38427368151426422038 -0.27535119285523024235 0.0030591521168820811488 0.13165304445741990436 0.23087967256337224575 -0.087847860054055218471 -0.20894925711230144527 -0.10715683479332152594 -0.2166054210736079455 0.1809402476203686716 0.38939236603374438594 0.063725402063116873275 -0.019365401372309812289 -0.13419285977003106436 0.24884776474403808022 -0.24215779909991483332 -0.18054580517776455673 -0.29102255043711700022 -0.014662691698089248132 -0.13515707388478243045 -0.12663926924231563853 0.045028124819004061719 0.03725196648535371996 -0.51690984550020435684 -0.25028450026790283189 0.057241863884744934032 0.10152199005338322091 0.032202713782977419876 -0.40611306456371559781 0.051804309511163916524 0.3039818538516687596 -0.14461047848056884924 0.21066428300724351907 0.16330689975825737892 -0.024373989780632501767 -0.11294374471331647403 0.14950649445947139515;-0.57670987389886141372 0.24649753607047125703 0.073261117637520259405 0.22840912531911097827 1.1431269409269007031 -0.20190341051890384194 -0.050225229073404584201 0.24954239172449926842 -0.18333921239398198733 0.3519667318949488144 0.036219025247922385924 0.3512525055974130006 0.56521037809340479718 -0.087170448220248081261 -0.075938757429539441302 0.04305387203002269958 -0.38991426396474776483 -0.25076149217096926902 0.20798274262523491762 0.37409501132568179216 0.17875101530877934852 0.17052473875754320387 -0.21783918208963837237 -0.20083568299345697095 -0.48497510231131601977 0.054200582453303523811 -0.20859348427518301095 -0.054881762582172116671 -0.12034700423627220367 0.019002693312298125916 0.22755679772166637065 -0.095668029301425733246 0.027040454830252462493 0.10563856235456861588 0.32225208887665546253 0.29447900383224595577 0.024488695917618812092 -0.10773775636290440494 0.19481238392191149722 0.050733056121630287771 -0.29630916503342991097 -0.20448820659893710006 0.099589209262701205994 -0.20740432073467124363 -0.058035763021094324832 0.025955590818305240147 0.098224109561863004458 0.2731788822423480978 -0.12952664072190661626 0.20593293169198623183 0.2207227652242893523 -0.083367788968197770183 -0.080409502055315870694;-0.30122761302974665476 2.9177516578711384376 0.037101035511673201295 -0.21543350713835465737 -8.9906802283499891171e-05 -0.055284330015352246834 -0.16390649614070895712 -0.2387898489963739268 -0.20975374984790279287 -0.17564650335840847895 -0.19215063012046573743 -0.051777118164786896382 -0.080180443960443451012 -0.13081333195602926067 -0.05966984963388076435 -0.1581722277094665674 0.10112323597447198109 0.06383855518738315582 -0.18765300125927009134 0.14100377418298098986 -0.25383812761201429709 0.0048170634970195868457 -0.14618319375502059065 -0.22722942179117919248 -0.16605869941458273331 -0.23101944845497274228 0.64831677439998702805 -0.39252055631319870965 -0.21666513989783026117 -0.15840760469101880514 -0.11955163126607325219 -0.032750291926923254249 -0.001864914392963461752 -0.14443453491861033 -0.12739463236329506834 -0.072183794585982216652 -0.10075232149885285371 -0.029821223249518864773 0.036253538501872982491 0.065736257429448233247 -0.21863325020425394829 -0.079406464534126738886 0.095908676114678764746 0.054485820292716286017 -0.04708785015867256174 0.023067120714255123781 0.11476545998889947642 0.1836019336074972419 -0.0030571140874249350117 0.26450519376825831763 0.20602405306262924767 0.1269583849469057002 0.081034446782012353738;-0.090404134687344053778 0.31138780131165422205 -0.11632625674417662598 0.39781894879227636119 0.43288344192852246106 0.075602090491299525632 0.15680163519371312364 0.22511628271260064604 -0.10575165875423751805 -0.3154107954167005845 0.22756469191889616699 -0.12495288588558724208 -0.22054393562744098456 0.14018133332289900439 -0.15490611862452774439 0.15520158867951919235 -0.55777561376930862025 0.089205500522921171713 0.43965701617916258526 -0.043073328744767651333 0.33091752464112733634 0.18655409259329269744 -0.091446478943996892252 -0.20966882493905689144 -0.24521446738550478628 -0.048920524505853803243 0.34795478529297985126 0.094011764508033099363 0.097240506686660205249 0.29329157803885558264 0.13256550569543407159 -0.1790762925372516301 -0.14564247749463360426 0.046283793881274661042 0.24477952886079787365 0.10428228364513374149 -0.48272120025843934243 -0.03506412238439012008 0.036263584139491260305 0.17577510005704446994 -0.58980232232755280819 -0.051675694936943211699 0.49032173540593460004 -0.53881427044004703841 -0.19453018282613102063 0.20435655797826435265 -0.23120615399925950606 -0.095556609652533736066 0.21284717592086219162 0.37864170687524384418 0.26933788445419820645 -0.28105169831670823166 0.41791177089448222626;0.099173596826772514312 -0.097691012361329307434 -0.0020646655581129705857 0.22596323969261902787 -0.2374102119635158048 -0.30552640640583894616 0.14259186740947549232 -0.040283847675639049279 -0.051638138492654479805 -0.17599844613648910063 0.31373388244094441157 -0.49892554571451164236 0.28548684097599341669 0.082914056961724255657 0.21729604772455840545 0.19338879995330399142 0.22252076755976962774 -0.3256438935966491921 -0.23999656446993411496 -0.10329351989528780253 -0.0099893470185901424296 -0.1216791347125582845 -0.045020079662904687046 0.014096207328912938039 -0.22212870895419462025 0.010087389253476075623 -0.28111826044418980475 0.19453539802094468869 0.24971708022199406996 -0.28130714735510009561 -0.18602311067863019911 -0.015658060375560303029 -0.23523025051090501458 0.23993960334196712259 0.10423707569460105571 0.31303526494497085908 -0.35198020948333380575 -0.33157353332124289702 -0.22018377234288047384 0.17228929952998095487 0.07681568047051566539 -0.079888318026657481608 -0.31969014288292174619 0.12343911875163002256 -0.12617350005487493192 -0.071961732715201412458 -0.26315300841840982837 0.29733127043810791967 -0.44470328455464830375 0.10635852783826579837 0.30114168295164894795 -0.038434061148042771017 -0.21469873689016436002;-0.020488349742583639862 0.38359449833539394081 -0.35249470861911913477 0.24607774512124927502 0.25889065720344078825 -0.18410898010022905269 0.10697567190639079016 -0.23904305484575336105 0.25744320175252310978 -0.48054602156307629768 0.025195084749225212656 -0.21243286233597913348 0.0063650337899556833077 0.13571292817274041576 0.17312004206394435157 0.059633254858773972196 -0.6598347774865318538 -0.16427067556869137666 -0.052376072002787224524 -0.12840817408660640253 -0.066532658423526999658 -0.014079251100899572643 -0.12910792759292941123 0.18442601741539285665 -0.28129837482034769636 -0.10235529916489970181 0.15167099870801442618 -0.083925225322842855746 -0.43526739388447421852 -0.012862695920983737569 -0.15088000919253549692 0.18333882903635298489 -0.24436639521093622696 -0.46677256141804457368 0.10968502748968843308 -0.30004837120567295905 -0.068197145198459693805 0.077717676715204242477 0.34657290830248849156 -0.15264865985731498887 -0.1269002506614325676 -0.084936024383814090477 -0.25510594103587380665 -0.15996291723547226282 -0.015386159848489599708 -0.13160099507304104383 -0.1928148136902897436 -0.0086777801023737791142 0.37395356203942647921 -0.12701463644458960145 0.076552476214815090572 0.13006206915275037028 -0.2767289579367279706;1.5996709008111746897 1.4756878245293953977 -0.32278470249994994923 0.24702806596709428466 -0.74200158584211384216 -0.15267108773472373717 -0.055855041904989001511 -0.12748080952445253744 -0.063681761073534876028 -0.11830275470896607637 0.31089153898113991437 0.27037612347746231567 0.27211283346691927942 -0.16679173042244460623 -0.014738889906054455231 -0.4559007740322017499 -0.052202525099983354551 0.058389405595488046152 -0.23466991399501516136 0.028667142623081665748 0.056868613531954548268 -0.014152248534876260555 0.063312921337413119449 -0.23747304983316655513 -0.15118507558681587577 -0.37340959580826066366 -0.12151051785014009565 0.13812691048239264524 0.07889102823942116538 -0.084941510041198861614 -0.21924578228440125272 0.092523145549040702873 -0.081398235996564094474 -0.029366012515412182049 0.38160620246751708606 0.01712269085664977139 -0.056660867777768887665 -0.28239371328346934975 0.013176277161688409317 0.081031359911905215254 -0.37722882368666549313 -0.1264000852868112923 0.2454488886732331121 0.10558307137727862557 0.6601230456872453356 0.041387656122614788212 -0.020004344890239979249 0.46772195356643891939 -0.070740143527701637716 0.1682303310568987742 0.45486985284237757554 -0.13035738697534091091 0.06840889796919062682;-0.0078902195346885733301 0.35906854554798733892 0.21402207261260750015 -0.12097846324231073534 -0.33514653762020052419 0.14132047080861712129 0.19887752709942996265 0.51139231043918953468 -0.1351204017366026966 -0.18812636198310100921 0.077171430958108744314 -0.050926626559966027552 0.28195873460888176698 -0.076996484232231071632 -0.036237752149852794914 -0.099700410572611655735 0.32474748378966827866 -0.12703454061015159726 0.077385826210823932536 0.14464119081214660278 0.33191827359984127366 0.013015934020791233156 -0.20405731102614679817 0.29764562135871608373 -0.42371536100535250879 0.052068251841042370587 0.17390486187891132652 0.047990251424016132364 0.45531670596402518125 -0.16900387538422320666 -0.31530889119128274745 0.1937853605531996426 -0.086403176158397473894 0.34733572371867471595 0.0075099340030829837486 -0.11102634336800654147 0.18855352030576497113 -0.18606380453661591767 0.14419749509173890312 0.28252070984177751756 0.39110831052197558844 0.21580074241731550533 0.031897535781727930082 0.43740158323950412145 0.043725178618288937371 0.20578883570655348567 0.56485518844377125003 -0.2693836769937403286 0.19534654935025844158 -0.047306108070523933407 -0.30673521082558918849 -0.40546467678494507725 -0.28379584192095430595;0.24120255987115141183 -0.64307146887135568925 0.27756683573845875035 -0.33289878175948772743 -0.10753848819835526429 -0.142937727515552504 0.16984050953067025835 -0.088944741184221159935 0.49974805251535964201 -0.49184335296386316738 -0.018917136564154665018 0.044563846356316348662 0.076846491753957177351 0.02879663590430236661 0.34640279137943974508 0.21108607228378176157 -0.077007225571189913405 0.16506268747109117956 -0.19255340782577148873 0.33472144345095378171 -0.16523115910731289713 0.12681051492033743044 -0.28655718972281740697 -0.23690964946981310502 -0.070028076677747783108 -0.078671368558448348529 -0.12919437554751922459 0.43181621080728516127 0.075057835814630838311 0.013040823913794559116 -0.039021413264613870331 0.037726906080966064738 0.20114909483011061964 0.23252233984050571514 0.01473164890027742549 0.40992644342416412195 -0.32061637221385291818 0.10291862691735399749 -0.062223189809579110277 -0.039951456433934308399 0.38644532468748232779 0.35333837116663002753 0.25501370327469691235 -0.102278376598342019 -0.21761522632067525906 -0.34056610934600578533 0.13973889068856065743 -0.063495505345151831422 -0.42260053432755861902 -0.14018433715302586196 -0.32879918092674276231 -0.019544880617097082354 0.1031399125272940559;2.1444962548872736896 1.3259083031713174705 0.0097695541902260152334 -0.043660314858774439128 0.083441413415980325574 0.063703638269349827095 -0.037804308243971962433 0.044540987046654920145 0.10734132116045254357 0.1492827270828271935 -0.074510627265246320849 0.11374600028360176696 -0.18542661389912290515 0.042235346083448109533 0.022279991800568905297 0.10126208381614797138 -0.11420853425595897668 0.024781238735967946879 0.024157227738173248088 -0.022930495735597140883 0.032494771969431485159 -0.062345282405499753697 0.12891583654987906482 -0.065556551352281125511 -0.11149969629506717439 0.058770432663782221083 0.094994139168376706683 -0.0029020355457375157995 -0.18695328194326207849 -0.037406699202922305547 -0.11807270440140053835 -0.0639718266302026356 -0.35404022947876673255 0.35562218412201490603 -0.053680228051164735614 -0.10133174229508543074 0.10690297007504666327 0.0039457828957495267447 -0.27084052422229548673 0.29228203551263404192 0.030490292212667136074 0.12782759974944912784 -0.23426719591299835499 0.034511390906455677308 -0.33850141789488080724 -0.12435093167057409413 0.081676174710162627313 0.046579486505094400139 0.017809280581433849233 0.012414447081561384711 -0.22913824541580868344 0.15486316304562508517 -0.13832282548877378181];

% Layer 2
b2 = [0.072651798510112663987;-0.30131033731438300327;-1.0263166529268921146;-0.80091179650196520079];
LW2_1 = [-0.52968032595098302195 0.075022622078749989782 1.1498126087477031909 0.66279572567263711491 1.0652123292872996974 1.0747188448065145838 -1.6952791850428288178 -1.2553146949850160219 -0.92766602663292285769 -0.88369552373571802484;-0.20776994534711262785 0.81546338154637010298 2.0861839173946652437 0.24582051853966097044 0.18497976654434977739 0.088402092016437436306 -0.23378384823802200732 1.0804941167038908389 -1.0761659736954420907 0.54058142293001354428;-0.78637745591662722155 0.65663564582593025865 -1.6444309178980647257 -0.46895714744018401898 -0.41588882003762001061 -0.14303359351803621169 -1.4754714175773122609 0.43038113172197328682 0.22540119141506465006 -1.1370248628877284158;1.5702831467295805812 -1.0593630305517400814 0.29036516526687405904 0.07765931195271381926 0.59863329534020481848 -0.32382460022865217075 1.0239208783112139223 -1.1185221112427163881 -0.57939384283176453838 1.2207183660518907686];

% ===== SIMULATION ========

% Dimensions
Q = size(x1,1); % samples

% Input 1
x1 = x1';
xp1 = mapminmax_apply(x1,x1_step1);

% Layer 1
a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*xp1);

% Layer 2
a2 = softmax_apply(repmat(b2,1,Q) + LW2_1*a1);

% Output 1
y1 = a2;
y1 = y1';
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
y = bsxfun(@minus,x,settings.xoffset);
y = bsxfun(@times,y,settings.gain);
y = bsxfun(@plus,y,settings.ymin);
end

% Competitive Soft Transfer Function
function a = softmax_apply(n,~)
if isa(n,'gpuArray')
    a = iSoftmaxApplyGPU(n);
else
    a = iSoftmaxApplyCPU(n);
end
end
function a = iSoftmaxApplyCPU(n)
nmax = max(n,[],1);
n = bsxfun(@minus,n,nmax);
numerator = exp(n);
denominator = sum(numerator,1);
denominator(denominator == 0) = 1;
a = bsxfun(@rdivide,numerator,denominator);
end
function a = iSoftmaxApplyGPU(n)
nmax = max(n,[],1);
numerator = arrayfun(@iSoftmaxApplyGPUHelper1,n,nmax);
denominator = sum(numerator,1);
a = arrayfun(@iSoftmaxApplyGPUHelper2,numerator,denominator);
end
function numerator = iSoftmaxApplyGPUHelper1(n,nmax)
numerator = exp(n - nmax);
end
function a = iSoftmaxApplyGPUHelper2(numerator,denominator)
if (denominator == 0)
    a = numerator;
else
    a = numerator ./ denominator;
end
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
a = 2 ./ (1 + exp(-2*n)) - 1;
end
