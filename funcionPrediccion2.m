function [y1] = myNeuralNetworkFunction(x1)
%MYNEURALNETWORKFUNCTION neural network simulation function.
%
% Auto-generated by MATLAB, 17-Jul-2023 15:58:17.
%
% [y1] = myNeuralNetworkFunction(x1) takes these arguments:
%   x = Qx53 matrix, input #1
% and returns:
%   y = Qx4 matrix, output #1
% where Q is the number of samples.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [500;9;12;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0];
x1_step1.gain = [4.49438202247191e-05;0.181818181818182;0.0555555555555556;0.5;0.5;2;2;2;2;2;2;2;2;2;2;2;2;2;2;2;2;2;2;2;2;2;2;2;2;2;2;2;2;2;2;2;2;2;2;2;2;2;2;2;2;2;2;2;2;2;2;2;2];
x1_step1.ymin = -1;

% Layer 1
b1 = [1.5882890934653757231;1.1907862187437046053;-0.59570492820446152571;-0.20225485057083500418;0.18105631811973807443;0.16508881220754462182;-0.72921900604517753131;-0.756332314537156436;1.0118179686068358158;-1.5446267964740605372];
IW1_1 = [-0.16155005382294898575 6.8387953373113763433 -0.12400502274287565629 -0.039992685087384988174 0.012827517083791355884 -0.042002345273300774331 0.022634384090002034051 0.0080836709735263787002 0.0035231700019575681697 0.015870376103305699339 -0.059126838047843591206 -0.34658591576039365911 -0.1472827871379914777 0.0135050035713320353 -0.17234406816885383673 -0.13896172764791880905 -0.13681208581926376788 0.048553790486251302561 -0.14168376856244577211 -0.16705813598602931025 -0.18933332744969194605 0.09911911174555512738 -0.0059848900679767861807 -0.13051700714296601835 -0.19875195660954073085 -0.16411086797989130059 1.0372084711872242568 -0.88319417619329676494 -0.22184398777037869777 -0.24926638825412611444 -0.17301803214833080813 -0.08402824838127226359 0.0087299605673683087353 -0.25133128381725128309 -0.11194052764866543881 -0.1037872479312831886 -0.028035866677212382958 -0.089254515072228132744 -0.32674051858064756537 -0.074988568081605283533 -0.25540058202159465761 -0.11423754458127940992 -0.21122346722173837574 -0.13479486749310476412 -0.2224959706190585973 0.016281427643592558813 -0.087979238082249736075 -0.28183304017537103014 -0.30822633285205358611 0.18605819589686314885 0.25167978477752017685 -0.015341954227397381835 -0.069951919614404903247;-0.09566168469047024725 -0.08008714716202114392 -0.14641932270148616535 0.5747158156621030578 -0.33604616872508485947 0.39421972837050722749 0.42632637164707337663 0.35681646713134251847 0.030027019774402561453 -0.77973014602389612016 -0.11642411342047088996 -0.11042763822780127247 0.059795704180041528431 -0.54411447387585076818 0.38930732997266231932 -0.27220734469501273178 -0.0053555119922082550926 -0.37096384363188178446 -0.26495592669591527812 -0.15463695466431537362 -0.29309052410918068343 0.033084183979478272442 -0.44858265055853563386 -0.6474039100575014194 -0.67618327624732521564 0.25824645686561531477 0.018270795558236019307 0.011840562121949390478 0.14935305598098649882 -0.13093058056442874459 0.27772604006054640857 0.39233888994914861703 0.66767017831530151017 0.026429762963423635014 0.47547442082254609552 -0.63204538334054749527 -0.11395776711897347144 -0.24060238094288993738 -0.48196416017590143488 0.23101331384524964596 -0.48520618935576775854 0.18084457639458140221 -0.31286769339994985328 0.31923977201710357354 0.18471154504645809213 -0.38234123379973611323 0.3574583781573587582 0.36265238771459296085 -0.23666711019498687385 0.63180400739836450885 -0.76822551112349612978 -0.072500584341409171629 -0.40450760272852714916;0.18688277869777122908 -0.31796838629012863509 -0.0027193994611338224814 -0.028853275221242067478 -0.2311073351792532482 -0.36566848910537058659 -0.069955479161720901526 -0.2915726945212741561 0.20969438920366240131 -0.38284015942007304512 -0.12181370999596516369 -0.32662653656542434133 0.0043678761124729958976 -0.11908833324596179715 -0.29878310686796477613 0.081557416415996786263 0.058383764809663646345 0.099200662451603235925 -0.35633967458410320539 -0.50552399012388660182 -0.32942816216993253686 -0.35479968582592741333 -0.098934010238641942325 -0.09179871315941855181 0.26323848361454871281 -0.14229512933595414581 -0.49974599468943881053 0.29561557845101976705 -0.23960667818159775422 0.0084698092811119739948 -0.50254991933697790163 0.091933059753336404674 -0.52635476597936403653 -0.089922909304159887034 -0.39497425992498647052 -0.40262860313293508119 -0.29936968985633821694 0.03601445420186223656 -0.28019792604606791331 -0.11233655975721179576 -0.17356436924916934794 -0.51247805133102830588 -0.20827824207746661878 -0.23964118753899371628 -0.31562327928377964525 -0.015447538288500260381 0.0520152075808026082 0.26293781444190034158 -0.02242827472403994063 0.50734776408003812165 0.064800021616435554694 0.37717726723272715361 -0.19708100005359838192;4.9029667824295133371 1.9749230445647565357 0.0010273251209840744778 -0.031495405784028526752 0.52096372723353834289 0.10904990621746821211 -0.018005221807353484487 -0.10606006142313034735 -0.039759615862235642147 0.093435978252320431303 -0.29236996783921387344 -0.53357642104454827692 -0.29928575375014077053 0.34959799423433302046 -0.060922952897172318043 -0.19488725140517507151 -0.12486705727979084679 -0.12226954303033102378 -0.23561094454926154174 -0.22923296402088744195 -0.37644250467486278788 -0.27749043756647090442 -0.16123887186878518851 -0.39241084760785355234 0.29009298352166945634 0.21233881516652999832 -0.11823854648046155935 0.026709200299450324562 -0.15861412761660145798 -0.24838326443219183037 -0.079213201905609834097 -0.21407658573276761027 -0.1579360604827795278 -0.31302618650858293758 -0.23006558969740642517 -0.29884561732762876529 -0.37719251970352712933 -0.16299384604543648569 -0.29728333507577670014 0.093582046475739241731 -0.28805457497134612233 -0.19321087659960742289 -0.11448867217985576883 -0.16749226394739152868 -0.12565608388360088865 0.15041522854944761045 -0.04408408009885547707 0.14019992108495937799 0.21402218647028628529 -0.40174543143467844608 -0.07114918008588348719 0.1586659629202315791 0.23584268050687237639;0.024991054808631750495 5.5407147456195637858 0.016704216053347670928 -0.04208197573459734192 0.22938160910833527151 0.16847443272461690156 0.21727284490158907393 0.13650473178098243565 0.17352182600309101757 0.26654717305079300704 -0.2183362089839697151 0.041584646050827366037 -0.019805234219891994923 -0.097973385212682617684 0.14888843270567908572 -0.066740369112072706059 0.085371678452141053217 -0.30192361779624488083 0.055803678680942686574 0.12826004200350704654 0.022397275296740570827 -0.041341421838020586677 -0.017230145252209047579 0.1845678316702534516 0.17775890321819906581 0.16492406892973815458 0.015712369556485722422 0.21433633822156655802 -0.007059629079980650132 0.014048388542630064341 -0.27616220820431464089 -0.074221618383497958704 0.0050575568395959460966 -0.078207265108627702088 -0.054757700499538389249 -0.082585702780687150759 -0.05770189507685703767 -0.055176071148300934177 0.25227582561705602648 -0.1612950075499830771 0.05764098567178591731 -0.10465808832520580307 0.024417642779856543744 -0.021839551194774219772 -0.14146953639777340439 -0.054298227167927835823 -0.0057327901839389176775 -0.0067821313955982835686 -0.20308325813624297784 -0.078510294389749019084 0.062666620497922570499 0.32610693956755160139 0.19413190565372864804;1.3345382807140595549 0.25666699889525212974 -0.18331447281628024393 0.13226822919801123346 -2.5106437856662378039 0.26073088245729181267 -0.42940919886270001449 0.80287394191029315405 0.41896873741283541248 -0.030949696055091950597 0.38481664493801959193 0.03202500946612577698 0.054096116884074355036 -0.64499872970269178651 -0.064598237990713611167 0.38783433202728367917 0.024081726598961444158 0.055283511875343638309 -0.67724939785309723472 0.31446260166520012547 0.021740894966840413477 -0.15142735679857680098 0.23413405498122677462 -0.19842994690037918382 0.013408941558475231948 0.10290476487391557459 0.37692144571491914551 -0.58070070803463869069 0.30032345185229791795 0.22507544413248950499 -0.062004743854477836762 0.011152419656062385195 -0.012348110646710645788 0.05926989504526353203 0.28361807961226609409 0.10761209409684141525 -0.28173850530373933942 -0.10515962015412791408 -0.017564463997787348182 -0.42860983717979239671 0.073391456617576913968 0.15926645131210415141 -0.10386315909016552439 0.35532496776792743542 0.10064490090053281046 -0.23237634851459676444 -0.21294075070158416385 -0.3528211249860819243 -0.05365947562152675876 0.3263349488780587504 -0.62494689853820928338 -0.11443353512660305038 -0.28970943167485241343;-0.06493088055327969621 0.26599961089972595785 0.24650733988472559033 -0.33576437878484061139 0.28395486677880887871 0.36324190179181314875 -0.11325831417260169565 0.47040075222328020521 -0.2461916231924624332 0.21194879424061019435 -0.084715124265518720881 0.44652512260568366642 0.1416946966642964878 0.39135527207738640687 0.06502720553600843667 0.29067862621521123323 0.5605516824194917147 0.4694829642754362875 0.4969187337616545741 0.17449331676822973924 0.25291870888043532783 0.075611909000874860665 0.49565455282312698149 0.16394602995131229983 0.29319357956423552913 -0.2651064850567463882 -0.14405669614011318291 -0.11446999748029960953 0.099474177239730801614 0.10444352062529661807 0.1066138399540227516 0.43474513949572729521 0.18397950688186989754 -0.11204793130756861286 0.07768374865346037994 -0.07437237190668928577 0.47200970088249100121 0.12335783934454193356 -0.11578001544903430975 0.14044071363831897581 -0.0035549194390524520813 0.20066894827531611689 -0.11041644451973227359 0.016617933862608600531 -0.057210299665969237271 0.23587685901643165587 0.003321120470663243944 -0.23604612065997090942 0.26199278075579585101 -0.046162622859489819971 -0.054116979540461331022 -0.37391122331569759396 0.32666640124743040463;-0.12738154370603896326 -0.043844602958322313746 0.47516997240423586302 -0.38299385612789005329 -0.58727346253817669375 0.45088063982674442265 -0.15662061387143741409 -0.1484924259146569725 0.15618429151479226724 -0.062943702815407343021 -0.14590549199842467454 -0.18514331010083079354 0.04019178015892568151 -0.73237379657661272336 0.039001254285383479825 -0.14771918735481556761 0.10019948787789019484 -0.13117196820446022643 -0.093108004617055803442 -0.013846612159364559205 -0.63113369421030351969 -1.0032149455510170899 -0.012977827960967643073 -0.037207538381137710004 0.26757299878501772383 0.32785962784701094819 -0.14533690486767550376 -0.34096320217589715096 -0.11744464443515914565 0.14492162334977906624 -0.29316261300895529729 0.12343419328143305502 0.094422343325101812384 -0.45968618739505434645 -0.28804648721641090692 -0.016990221738527433448 0.12901310083175562826 -0.16864985880820890229 0.004600921745115000086 -0.23682142556191529414 -0.013659546663120782084 0.0092737965478931951718 0.22717860804828290955 -0.28643400161341314725 0.31339140725567121715 -0.55309854325646790052 -0.33081817701981686142 0.16215238429679074139 0.39994033395989292412 0.20123475733807164034 -0.13440897586882943893 0.015859958680321317032 0.1341791808196168001;0.63434117543016721452 0.94302552681625018138 0.09647473955996103967 -0.2084746304324542332 2.7498482089496327774 0.13702793691087639116 -0.18681640750781225435 -0.074544004055637810846 0.1338319183929640166 -0.093443021622243355173 0.20108601193771868942 -0.17787877222230652485 -0.094891182695014883453 0.42222676740722048239 0.2836495006568197641 0.23663266383216155497 0.16484104869710247687 -0.43438706645905911241 -0.27107497479422282272 0.26712812074152719743 0.17500618599490433414 0.46463466883691240117 0.1476656516363587246 0.032738227759653210081 -0.020016613631889137309 0.051654138732825670421 -0.29223950176432389458 0.27796647694968240616 0.35904116720304740662 -0.093728165747250000162 -0.052777719814796938969 0.037915065579073280178 0.19606442225518858069 0.061960989395690016512 0.22905540252157891024 -0.045732431045486944543 -0.29721861036848856719 0.20504029391492445411 0.10903012266393716234 -0.080023486158537729396 -0.068737160992018986327 -0.18918871219257557548 0.1275089531945721999 0.099558899376549575555 0.13271245931740555113 0.25387324017243645402 0.24870305130076414413 -0.055751087884686044427 0.34649119987245385888 0.27236132792735212593 0.08477304057249579472 -0.10846585180209224186 -0.35194741930289596965;1.0431554556578643833 -0.31402793491252228852 -0.20117045563290231192 -0.092405916187865200229 -0.86741740079828888454 -0.07611971045182214235 0.84186411405264283125 -0.27031096243075541929 -0.035471961641376836827 0.38447674520431063261 -0.084252957180432158646 0.50017945323067680707 -0.184555149311438349 -0.31307221271369950477 -0.26560756377245070547 0.25004923369139886447 0.041142786826502422692 -0.16346548268095689727 0.8751121100780241413 -0.26191469287688412537 -0.27306245795766476148 0.019386185976569287465 -0.1252378046623102148 0.40304378600414819678 -0.27994624491191388849 0.36581751736845513623 -0.50313369978124244941 -0.041201270479253204737 0.0078402549268653740078 0.377411389192642166 -0.16493752419224058658 0.7678283722990703053 -0.13354502311290006311 -0.30750491468546481411 0.46762678830833959154 -0.17370046939447789103 0.34671300864419413168 -0.051026772674211441638 -0.44796340575903281778 0.068663549246824912009 0.15824327869305682137 0.25744145085027414499 0.032807680331455667255 -0.27009340029307427056 -0.50643487882834259395 -0.20705585429704309597 1.0854229328106417274 0.24542801409600153995 0.0056999129880190820344 0.049852206478146122992 0.036516921402635925398 -0.34361975330970878639 0.48599512984723963749];

% Layer 2
b2 = [-0.24171212275911674316;0.47510988523629105185;0.64412429725396069813;-0.4295234588646402174];
LW2_1 = [1.3531947748997987802 1.4299577732203248015 -0.14126328227828102713 -0.97709479428741063955 -1.4598445094389529419 -1.148864187095042011 -0.031685729114308280874 0.98139347191686676641 0.9383303283911142989 -1.5348424745754636334;2.9633089786593567183 -0.066942305046230762833 -0.68901037417513211203 -2.2964101211883636289 3.3855489984376934132 -0.66554407667497195167 0.33732386702567218606 -1.0973297616804651433 -0.47102538557624751281 -0.16571749198629054378;-3.5629971318100057687 -1.0018777205889626281 0.035659888349149869435 -1.0347151917706298718 -2.2928091279020565985 -1.0169264295162885325 1.2157871806277358306 -1.1581237033593070329 1.2473653842543905856 -0.047206147919810585722;-1.4390846358322990639 0.19777192109482197302 0.90294404174938880381 4.9867166619525988835 0.70929178933663239448 2.2912294108456667807 0.64783316166311155637 0.80242495826381077251 -1.9443381476415151354 1.060162658165414884];

% ===== SIMULATION ========

% Dimensions
Q = size(x1,1); % samples

% Input 1
x1 = x1';
xp1 = mapminmax_apply(x1,x1_step1);

% Layer 1
a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*xp1);

% Layer 2
a2 = softmax_apply(repmat(b2,1,Q) + LW2_1*a1);

% Output 1
y1 = a2;
y1 = y1';
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
y = bsxfun(@minus,x,settings.xoffset);
y = bsxfun(@times,y,settings.gain);
y = bsxfun(@plus,y,settings.ymin);
end

% Competitive Soft Transfer Function
function a = softmax_apply(n,~)
if isa(n,'gpuArray')
    a = iSoftmaxApplyGPU(n);
else
    a = iSoftmaxApplyCPU(n);
end
end
function a = iSoftmaxApplyCPU(n)
nmax = max(n,[],1);
n = bsxfun(@minus,n,nmax);
numerator = exp(n);
denominator = sum(numerator,1);
denominator(denominator == 0) = 1;
a = bsxfun(@rdivide,numerator,denominator);
end
function a = iSoftmaxApplyGPU(n)
nmax = max(n,[],1);
numerator = arrayfun(@iSoftmaxApplyGPUHelper1,n,nmax);
denominator = sum(numerator,1);
a = arrayfun(@iSoftmaxApplyGPUHelper2,numerator,denominator);
end
function numerator = iSoftmaxApplyGPUHelper1(n,nmax)
numerator = exp(n - nmax);
end
function a = iSoftmaxApplyGPUHelper2(numerator,denominator)
if (denominator == 0)
    a = numerator;
else
    a = numerator ./ denominator;
end
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
a = 2 ./ (1 + exp(-2*n)) - 1;
end
